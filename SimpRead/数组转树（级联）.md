---
banner: "https://juejin.cn/equation?tex=n%5E2"
---
---
url: https://juejin.cn/post/6844903904140853256
title: æ•°ç»„è½¬æ ‘ï¼ˆçº§è”ï¼‰
date: 2023-06-28 22:54:50
tag: 
banner: "https://juejin.cn/equation?tex=n%5E2"
banner_icon: ğŸ”–
---
æœ‰æ—¶å€™ï¼Œåç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®å¹¶ä¸æ˜¯æ ‘å§“ç»“æ„ï¼š

```
[
    {"id":"12","parentId":"0","text":"Man","level":"1","children":null},
    {"id":"6","parentId":"12","text":"Boy","level":"2","children":null},
    {"id":"7","parentId":"12","text":"Other","level":"2","children":null},
    {"id":"9","parentId":"0","text":"Woman","level":"1","children":null},
    {"id":"11","parentId":"9","text":"Girl","level":"2","children":null}
]


```

è¿™ä¸ªæ•°ç»„çš„æ¯ä¸€ä¸ªå­å…ƒç´ éƒ½æœ‰å”¯ä¸€çš„ idï¼Œæ²¡æœ‰çˆ¶èŠ‚ç‚¹æ—¶ parentId ä¸º 0ï¼Œé™¤ 0 å¤–çš„ parentId å¿…æœ‰ id ä¸å…¶å¯¹åº”ã€‚

è€Œæˆ‘ä»¬æœŸæœ›çš„æ•°ç»„å¦‚ä¸‹ï¼š

```
[
    {"id":"12","parentId":"0","text":"Man","level":"1","children":
        [
            {"id":"6","parentId":"12","text":"Boy","level":"2","children":null},
            {"id":"7","parentId":"12","text":"Other","level":"2","children":null}
        ]
    },
    {"id":"9","parentId":"0","text":"Woman","level":"1","children":
        [
            {"id":"11","parentId":"9","text":"Girl","level":"2","children":null}
        ]
    }
]


```

è¿™é‡Œæœ€ç›´æ¥çš„æ€è·¯æ˜¯å…ˆæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼ˆparentId ä¸º 0ï¼‰ï¼Œç„¶åå†å°†å­èŠ‚ç‚¹æ”¾ç½®è¿›å»ã€‚

### array.push(obj)

åœ¨å†™ä»£ç ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ [].push æ·»åŠ ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†å¯¹è±¡çš„æŒ‡é’ˆåŠ å…¥åˆ°æ•°ç»„ã€‚æ•°ç»„å’Œå¯¹è±¡æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œä¿®æ”¹åŸå¯¹è±¡çš„åŒæ—¶ä¹Ÿä¼šä¿®æ”¹æ•°ç»„ã€‚

```
const arr = []
const obj = {a: 1, b: 2}

arr.push(obj)
obj['a'] = 111

console.log(arr) // [{a: 111, b: 2}]
console.log(obj) // {a: 111, b: 2}


```

é‚£ä¹ˆï¼Œæˆ‘ä»¬å†å¤„ç†æ•°ç»„çš„æ—¶å€™ï¼Œå°±ä¸å¿…åœ¨æ„çˆ¶å­èŠ‚ç‚¹æ·»åŠ çš„é¡ºåºã€‚åªè¦ä¿®æ”¹åŸå§‹å¯¹è±¡ï¼Œæ•°ç»„ä¹Ÿä¼šè·Ÿç€ä¿®æ”¹ã€‚

### ç®€å•ç‰ˆæœ¬

çŸ¥é“äº†æ–¹æ³•ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å†™å‡ºå¦‚ä¸‹ä»£ç 

```
function list_to_tree(list) {
    const roots = []
    for(let i = 0; i < list.length; i++){
      node = list[i]
      node.children = []
      if(node.parentId !== '0'){
        for(let j = 0; j < list.length; j++) {
          if(list[j].id === node.parentId) {
            list[j].children.push(node)
          }
        }
      }else {
        roots.push(node)
      }
    }
    return roots;
}


```

å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œå…ˆéå†åŸå§‹æ•°ç»„ï¼Œå°†æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„æ”¾å…¥æ•°ç»„ï¼Œæœ‰çˆ¶èŠ‚ç‚¹çš„å†éå†æ•°ç»„ä¸­æ‰¾åˆ°çˆ¶èŠ‚ç‚¹ï¼Œæ”¾ç½®ä¸Šå»ã€‚

è¿™ä¸ªæ–¹æ³•è™½ç„¶ç®€å•ï¼Œå¦‚æœæ•°æ®æ¯”è¾ƒå¤§ï¼ˆçœä»½åŸå¸‚çº§è”ï¼‰ï¼Œå¤„ç†èµ·æ¥å°±ä¼šæ…¢ï¼Œå› ä¸ºé‡Œé¢è¦ä¸¤æ¬¡å¾ªç¯éå†æ•°ç»„æ¥å¯»æ‰¾çˆ¶èŠ‚ç‚¹ï¼Œå¤æ‚åº¦ä¸º O(

![](<assets/1687964090358.png>)

)ã€‚

### æ”¹è¿›ç‰ˆ

åœ¨ä¸Šä¾‹çš„ä¸¤ä¸ªå¾ªç¯ä¸­ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯å¾ˆéš¾æ”¹å˜ï¼Œå¿…ç„¶è¦éå†æ•´ä¸ªæ•°ç»„ã€‚ç¬¬äºŒä¸ªå¾ªç¯ç”¨äºæ‰¾çˆ¶èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å…ˆç”Ÿæˆä¸€ä¸ªå­˜å‚¨ id ä¸æ‰€åœ¨ä½ç½®çš„**å¯¹è±¡è¡¨**ï¼ŒåŠ å¿«å¯»å€é€Ÿåº¦ï¼Œé¿å…æ¯æ¬¡æ‰¾çˆ¶èŠ‚ç‚¹éƒ½éœ€è¦éå†æ•°ç»„ã€‚

```
function list_to_tree(list) {
    let map = {}, node, root = [], i;
    for (i = 0; i < list.length; i += 1) {
        map[list[i].id] = i; 
        // è¦è®²childrenåˆå§‹åŒ–ä¸ºæ•°ç»„
        list[i].children = [];
    }
    console.log('map') // {6: 1, 7: 2, 9: 3, 11: 4, 12: 0}
    for (i = 0; i < list.length; i++) {
        node = list[i];
        if (node.parentId !== "0") {
            // è¿™é‡Œé€šè¿‡mapæ¥å¾—åˆ°çˆ¶èŠ‚ç‚¹çš„ä½ç½®
            list[map[node.parentId]].children.push(node);
        } else {
            root.push(node);
        }
    }
    return root;
}


```

ç»è¿‡æµ‹è¯•æˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°æƒ³è¦çš„ç»“æœã€‚å¦‚æœæ­¤æ—¶è¾“å‡ºåŸå§‹æ•°æ®ï¼Œä¼šå‘ç°å·²ç»è¢«æ›´æ”¹, è€Œä¸”æ•°æ®ä¹Ÿè¿œå¤šäºæœ€å¼€å§‹ã€‚éœ€è¦æ³¨æ„æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæœ‰å½±å“ã€‚

### ç®€å•å®ä¾‹

ä¸‹é¢æ¥è¯•éªŒä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š

```
[    {"id":1,"pid":0,"name":"ä¸Šæµ·å¸‚"},    {"id":2,"pid":1,"name":"æ¨æµ¦åŒº"},    {"id":3,"pid":1,"name":"é™å®‰åŒº"},    {"id":4,"pid":2,"name":"è¥å£è·¯"},    {"id":5,"pid":3,"name":"åŒ—äº¬è¥¿è·¯"},    {"id":6,"pid":2,"name":"é•¿æµ·è·¯"},    {"id":7,"pid":3,"name":"é•¿å¯¿è·¯"},    {"id":8,"pid":4,"name":"1å·æ¥¼"},    {"id":9,"pid":4,"name":"2å·æ¥¼"}]


```

ç”¨æˆ‘ä»¬ä¸Šé¢çš„æ–¹æ³•ç¨åŠ æ”¹åŠ¨:

```
function list_to_tree(list) {
  let map = {}, node, root = [], i;
  for(i = 0; i < list.length; i++) {
    map[list[i].id] = i
    list[i].children = []
  }
  for(i = 0; i < list.length; i++) {
    const node = list[i]
    if(list[i].pid !== 0) {
      list[map[node.pid]].children.push(node)
    }else {
      root.push(node)
    }
  }
  return root
}


```

å¤„ç†åå¾—åˆ°:

```
[
    {"id":1,"pid":0,"name":"ä¸Šæµ·å¸‚","children":
        [
            {"id":2,"pid":1,"name":"æ¨æµ¦åŒº","children":
                [
                    {"id":4,"pid":2,"name":"é»„å…´è·¯","children":
                        [
                            {"id":8,"pid":4,"name":"1å·æ¥¼","children":[]},
                            {"id":9,"pid":4,"name":"2å·æ¥¼","children":[]}
                        ]
                    },
                    {"id":6,"pid":2,"name":"è¥¿è—åŒ—è·¯","children":[]}
                ]
            },
            {"id":3,"pid":1,"name":"é™å®‰åŒº","children":
                [
                    {"id":5,"pid":3,"name":"å»¶å‰ä¸­è·¯","children":[]},
                    {"id":7,"pid":3,"name":"å—äº¬è·¯","children":[]}
                ]
            }
        ]
    }
]


```

### å°ç»“

è¿™ä¸ªä¾‹å­åªæ˜¯æœ€ç®€å•çš„èŒƒä¾‹ï¼Œå®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­éœ€è¦æœ‰æ›´ä¸ºä¸¥æ ¼çš„åˆ¤æ–­ï¼Œéœ€æ±‚ä¹Ÿæ›´ä¸ºå¤æ‚ï¼ˆå¤šçº§ã€æ’åºç­‰ç­‰ï¼‰ã€‚å»ºè®®è‡ªå·±åŠ¨æ‰‹è¯•ä¸€ä¸‹ï¼Œç†è§£å…¶ä¸­çš„ç®€å•åŸç†ï¼Œç„¶åè¯•ç€å†è¿›è¡Œæ‰©å±•å’Œå®Œå–„ã€‚