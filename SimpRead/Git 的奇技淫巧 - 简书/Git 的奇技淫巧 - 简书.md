---
url: https://www.jianshu.com/p/6ebf1a2d11a7
title: Git çš„å¥‡æŠ€æ·«å·§ - ç®€ä¹¦
date: 2023-06-11 16:48:29
tag: 
banner: "https://upload.jianshu.io/users/upload_avatars/9596322/e1e2bf13-7492-43c0-b9ac-1194a88f5a50"
banner_icon: ğŸ”–
---
Git æ˜¯ä¸€ä¸ª â€œåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·â€ï¼Œç®€å•çš„ç†è§£ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼šå¤§å®¶åœ¨å†™ä¸œè¥¿çš„æ—¶å€™éƒ½ç”¨è¿‡ â€œå›æ’¤â€ è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å›æ’¤åªèƒ½å›æ’¤å‡ æ­¥ï¼Œå‡å¦‚æƒ³è¦æ‰¾å›æˆ‘ä¸‰å¤©ä¹‹å‰çš„ä¿®æ”¹ï¼Œå…‰ç”¨ â€œå›æ’¤â€ æ˜¯æ‰¾ä¸å›æ¥çš„ã€‚è€Œ â€œç‰ˆæœ¬ç®¡ç†å·¥å…·â€ èƒ½è®°å½•æ¯æ¬¡çš„ä¿®æ”¹ï¼Œåªè¦æäº¤åˆ°ç‰ˆæœ¬ä»“åº“ï¼Œä½ å°±å¯ä»¥æ‰¾åˆ°ä¹‹å‰ä»»ä½•æ—¶åˆ»çš„çŠ¶æ€ï¼ˆæ–‡æœ¬çŠ¶æ€ï¼‰ã€‚

### å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€

```
//æŠ›å¼ƒæœ¬åœ°æ‰€æœ‰çš„ä¿®æ”¹ï¼Œå›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€ã€‚
git fetch --all && git reset --hard origin/master
```

### é‡è®¾ç¬¬ä¸€ä¸ª commit

ä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æ”¹åŠ¨éƒ½é‡æ–°æ”¾å›å·¥ä½œåŒºï¼Œå¹¶`æ¸…ç©ºæ‰€æœ‰`çš„ `commit`ï¼Œè¿™æ ·å°±å¯ä»¥é‡æ–°æäº¤ç¬¬ä¸€ä¸ª `commit`äº†

```
git update-ref -d HEAD
```

### æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨

å±•ç¤ºå·¥ä½œåŒºçš„å†²çªæ–‡ä»¶åˆ—è¡¨

```
git diff --name-only --diff-filter=U

```

### å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ

è¾“å‡º`å·¥ä½œåŒº`å’Œ`æš‚å­˜åŒº`çš„ different (ä¸åŒ)ã€‚

```
git diff
```

è¿˜å¯ä»¥å±•ç¤ºæœ¬åœ°ä»“åº“ä¸­ä»»æ„ä¸¤ä¸ª commit ä¹‹é—´çš„æ–‡ä»¶å˜åŠ¨ï¼š

```
git diff <commit-id> <commit-id>
```

### å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ

è¾“å‡ºæš‚å­˜åŒºå’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚

```
git diff --cached
```

### å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ

è¾“å‡ºå·¥ä½œåŒºã€æš‚å­˜åŒº å’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚

```
git diff HEAD
```

### å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯

```
git checkout -
```

### åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯

```
git branch --merged master | grep -v '^\*\|  master' | xargs -n 1 git branch -d
```

### å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ

```
git branch -vv
```

### å…³è”è¿œç¨‹åˆ†æ”¯

å…³è”ä¹‹åï¼Œgit branch -vv å°±å¯ä»¥å±•ç¤ºå…³è”çš„è¿œç¨‹åˆ†æ”¯åäº†ï¼ŒåŒæ—¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ç›´æ¥ï¼šgit pushï¼Œä¸éœ€è¦æŒ‡å®šè¿œç¨‹ä»“åº“äº†ã€‚

```
git branch -u origin/mybranch
```

æˆ–è€…åœ¨ push æ—¶åŠ ä¸Š -u å‚æ•°

```
git push origin/mybranch -u
```

### åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯

-r å‚æ•°ç›¸å½“äºï¼šremote

```
git branch -r
```

### åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯

-a å‚æ•°ç›¸å½“äºï¼šall

```
git branch -a
```

### æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³»

```
git remote show origin
```

### è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤

```
git remote prune origin
```

### åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯

```
git checkout -b <branch-name>
```

### ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯

```
git checkout -b <branch-name> origin/<branch-name>
```

### åˆ é™¤æœ¬åœ°åˆ†æ”¯

```
git branch -d <local-branchname>
```

### åˆ é™¤è¿œç¨‹åˆ†æ”¯

```
git push origin --delete <remote-branchname>
//æˆ–è€…
git push origin :<remote-branchname>
```

### é‡å‘½åæœ¬åœ°åˆ†æ”¯

```
git branch -m <new-branch-name>
```

### æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹

```
git checkout <file-name>
```

æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼š

```
git checkout .
```

### æ¢å¤åˆ é™¤çš„æ–‡ä»¶

```
git rev-list -n 1 HEAD -- <file_path> #å¾—åˆ° deleting_commit

git checkout <deleting_commit>^ -- <file_path> #å›åˆ°åˆ é™¤æ–‡ä»¶ deleting_commit ä¹‹å‰çš„çŠ¶æ€
```

### ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹

```
git revert <commit-id>


```

### å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit

å’Œ revert çš„åŒºåˆ«ï¼šreset å‘½ä»¤ä¼šæŠ¹å»æŸä¸ª commit id ä¹‹åçš„æ‰€æœ‰ commit

```
git reset <commit-id>  #é»˜è®¤å°±æ˜¯-mixedå‚æ•°ã€‚

git reset --mixed HEAD^  #å›é€€è‡³ä¸Šä¸ªç‰ˆæœ¬ï¼Œå®ƒå°†é‡ç½®HEADåˆ°å¦å¤–ä¸€ä¸ªcommit,å¹¶ä¸”é‡ç½®æš‚å­˜åŒºä»¥ä¾¿å’ŒHEADç›¸åŒ¹é…ï¼Œä½†æ˜¯ä¹Ÿåˆ°æ­¤ä¸ºæ­¢ã€‚å·¥ä½œåŒºä¸ä¼šè¢«æ›´æ”¹ã€‚

git reset --soft HEAD~3  #å›é€€è‡³ä¸‰ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å›é€€ä¹‹å‰ä¿æŒä¸€è‡´ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commitå³å¯  

git reset --hard <commit-id>  #å½»åº•å›é€€åˆ°æŒ‡å®šcommit-idçš„çŠ¶æ€ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¹Ÿä¼šå˜ä¸ºæŒ‡å®šcommit-idç‰ˆæœ¬çš„å†…å®¹


```

### ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿°

å¦‚æœæš‚å­˜åŒºæœ‰æ”¹åŠ¨ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æš‚å­˜åŒºçš„æ”¹åŠ¨æäº¤åˆ°ä¸Šä¸€ä¸ª commit

```
git commit --amend


```

### æŸ¥çœ‹ commit å†å²

```
git log


```

### æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„

blame çš„æ„æ€ä¸ºâ€˜è´£æ€ªâ€™ï¼Œä½ æ‡‚çš„ã€‚

```
git blame <file-name>


```

### æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½•

æ¯æ¬¡æ›´æ–°äº† HEAD çš„ git å‘½ä»¤æ¯”å¦‚ commitã€amendã€cherry-pickã€resetã€revert ç­‰éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼ˆä¸é™åˆ†æ”¯ï¼‰ï¼Œå°±åƒ shell çš„ history ä¸€æ ·ã€‚ è¿™æ ·ä½ å¯ä»¥ reset åˆ°ä»»ä½•ä¸€æ¬¡æ›´æ–°äº† HEAD çš„æ“ä½œä¹‹åï¼Œè€Œä¸ä»…ä»…æ˜¯å›åˆ°å½“å‰åˆ†æ”¯ä¸‹çš„æŸä¸ª commit ä¹‹åçš„çŠ¶æ€ã€‚

```
git reflog


```

### ä¿®æ”¹ä½œè€…å

```
git commit --amend --author='Author Name <email@address.com>'


```

### ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url

```
git remote set-url origin <URL>


```

### å¢åŠ è¿œç¨‹ä»“åº“

```
git remote add origin <remote-url>


```

### åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“

```
git remote


```

### æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨

```
git whatchanged --since='2 weeks ago'


```

### æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š

è¿™ä¸ªè¿‡ç¨‹éœ€è¦ `cherry-pick` å‘½ä»¤ï¼Œ[å‚è€ƒ](https://links.jianshu.com/go?to=http%3A%2F%2Fsg552.iteye.com%2Fblog%2F1300713%23bc2367928)

```
git checkout <branch-name> && git cherry-pick <commit-id>


```

### clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯

```
git clone -b <branch-name> --single-branch https://github.com/user/repo.git


```