---
url: https://zhuanlan.zhihu.com/p/466284397
title: Arch Linux é‡åˆ°çš„å‘ï¼ˆä¸‹ï¼‰
date: 2023-04-16 17:57:13
tag: 
banner: "https://pic1.zhimg.com/v2-1024b795f4494c7c2029b2dea6a223a5_720w.jpg?source=172ae18b"
banner_icon: ğŸ”–
---
![](1681639033860.png)

æ˜å¤©å°±è¦å¼€å­¦ï¼Œèµ¶å¿™åˆç†Ÿæ‚‰äº†æ–°ç¯å¢ƒçš„ç”¨æ³•ï¼Œç°åœ¨å·²ç»åŸºæœ¬æ»¡è¶³äº†æ—¥å¸¸éœ€æ±‚ï¼Œå†è®°å½•ä¸€äº›å‘ï½ã€‚

## **ç”µè„‘æ²¡æœ‰å£°éŸ³**

å› ä¸ºä¸Šæ¬¡ç¦»å¥‡çš„è‡ªå·±å¥½äº†ï¼Œæˆ‘å°±æ²¡æœ‰å†ç®¡äº†ï¼Œä½†æ˜¯åæ¥ä½¿ç”¨ chrome çš„æ—¶å€™è¿˜æ˜¯æ²¡æœ‰å£°éŸ³ï¼Œæˆ‘å°±ç”¨äº†å›¾å½¢åŒ–ç•Œé¢ pavucontrolï¼Œè®¾ç½®äº†æ’­æ”¾çš„å£°é“å°±å¥½äº†ã€‚

![](1681639033958.png)

## **æˆªå›¾å·¥å…·**

æˆ‘å¯¹æˆªå›¾å·¥å…·çš„éœ€æ±‚ä¸»è¦æ˜¯å¿«æ·é”®æˆªå®Œå›¾ä¹‹åå¯ä»¥å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸­ï¼Œç„¶åæˆ‘ç›´æ¥ç²˜è´´åˆ° markdown æ–‡æ¡£ä¸­ï¼Œè¯•äº†å‡ ä¸ªè½¯ä»¶åå‘ç° deepin-screen-recorder å’Œ flameshotï¼ˆä½¿ç”¨`flameshot gui`å‘½ä»¤æˆªå›¾ï¼‰æ¯”è¾ƒç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚

## **ç»™ dwm æ‰“ patch**

å‚ç…§[çŸ¥ä¹åšå®¢ å…¥å‘ dwmâ€”â€”åŸæ¥çª—å£ç®¡ç†å™¨è¿˜å¯ä»¥è¿™æ ·ç”¨ï¼Ÿï¼](https://zhuanlan.zhihu.com/p/183861786)ç»™è‡ªå·±çš„ dwm æ‰“ä¸Šäº†ä¸‹é¢ä¸¤ä¸ª patch

```
actualfullscreen      #è®©ç¨‹åºå¼€å¯å…¨å±æ—¶åšåˆ°â€œçœŸæ­£çš„â€å…¨å±æ˜¾ç¤º
â€‹
alpha    #alphaè¡¥ä¸ä½¿dwmçš„èœå•æ å˜é€æ˜ï¼Œä¸ç¾åŒ–æœ‰å…³ï¼›

```

ç”±äºè¡¥ä¸æ–‡ä»¶é—®é¢˜ï¼Œæ‰“ alpha è¡¥ä¸çš„æ—¶å€™å¤±è´¥äº†ï¼Œç»“æœç±»ä¼¼äºä¸‹é¢çš„æç¤º

```
Hunk #1 FAILED at 202.
1 out of 1 hunk FAILED -- saving rejects to file drw.c.rej

```

è¿™æ—¶å€™å°±éœ€è¦è¿›å…¥ diff æ–‡ä»¶è¿›è¡Œæ‰‹åŠ¨ä¿®æ”¹ã€‚

ä¸ºäº†ä»¤ dwm å³ä¸Šè§’æ˜¾ç¤ºæ—¶é—´ï¼ˆæœ€åŸºæœ¬éœ€æ±‚ï¼‰ï¼Œæˆ‘å‚ç…§äº† wiki ç»™è‡ªå·±çš„. xinitrc æ·»åŠ äº†ä¸‹é¢çš„å¥å­

```
fcitx5 &
~/.fehbg &
picom -b
â€‹
while true
do
        VOL=$(amixer get Master | tail -1 | sed 's/.*\[\([0-9]*%\)\].*/\1/')
        LOCALTIME=$(date +%Z\="%Y-%m-%d %H:%M")
        #OTHERTIME=$(TZ=Europe/London date +%Z\=%H:%M)
        IP=$(for i in `ip r`; do echo $i; done | grep -A 1 src | tail -n1) # can get confused if you use vmware
        TEMP="$(($(cat /sys/class/thermal/thermal_zone0/temp) / 1000))C"
    if acpi -a | grep off-line > /dev/null
    then
            BAT="Bat. $(acpi -b | awk '{ print $4 " " $5 }' | tr -d ',')"
            xsetroot -name "$IP $BAT $VOL $TEMP $LOCALTIME "
    else
            xsetroot -name "$IP $VOL $TEMP $LOCALTIME "
    fi
    sleep 20s
done &
â€‹
exec dwm

```

æ•ˆæœå¦‚ä¸‹

![](1681639034048.png)

## **è®¾ç½®æ¡Œé¢**

è®¾ç½®æ¡Œé¢ä½¿ç”¨å‚ç…§ [wiki](https://link.zhihu.com/?target=https%3A//wiki.archlinux.org/title/feh) ä¸‹è½½ feh è¿›è¡Œè®¾ç½®ï¼Œç„¶åé€šè¿‡ä¸‹é¢å‘½ä»¤è®¾ç½®æ¡Œé¢èƒŒæ™¯

```
$ feh --bg-scale /path/to/image.file

```

ä¸ºäº†æ¯æ¬¡ startx è‡ªå·±è®¾ç½®ï¼Œè®°å¾—å°†ä¸‹é¢çš„è¯­å¥åŠ å…¥. xinitrc æ–‡ä»¶ä¸­

```
~/.fehbg &

```

## **è®¾ç½®ä¸€äº›å¿«æ·é”®**

å¿«æ·é”®çš„è®¾ç½®ä¸»è¦ä¿®æ”¹ dwm çš„ config.def.hï¼Œä¸»è¦æ˜¯å°†å‘½ä»¤è¡Œå‚æ•°å†™æˆä¸‹é¢ cmd ç»“å°¾çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œç„¶ååœ¨ keys ä¸­å®šä¹‰å¯¹åº”çš„å¿«æ·é”®å³å¯ï¼Œè¿™é‡Œä¸»è¦è®¾ç½®äº†å‡ ä¸ªå¸¸ç”¨çš„å¿«æ·é”®ã€‚ä¿®æ”¹å®Œæ¯•ååœ¨ dwm ç›®å½•ä¸‹åˆ é™¤ config.def.hï¼Œé‡æ–°`sudo make clean install`å³å¯

![](1681639034121.png)

## **st åŠé€æ˜**

st åŠé€æ˜ä¸€èˆ¬éœ€è¦ picom çš„æ”¯æŒï¼Œå®‰è£… picom ä¹‹åï¼Œè¾“å…¥å‘½ä»¤ picom -b åœ¨åå°è¿è¡Œ picomï¼Œä¿®æ”¹. config/picom/picom.conf é…ç½®æ–‡ä»¶ä¸­çš„ opacity-ruleï¼Œæ·»åŠ  "80:name ='st'"ï¼Œä»¤ç»ˆç«¯é€æ˜å³å¯ï¼ˆæˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢å…¶ä»–é¡µé¢ä¹Ÿé€æ˜ï¼‰

![](1681639034197.png)

## **ranger ç®€å•é…ç½®**

### **é¢„è§ˆå›¾ç‰‡å’Œ pdf**

æˆ‘å¯¹ ranger è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå°±ç®€å•ä¿®æ”¹äº†ä¸€ä¸‹é¢„è§ˆåŠŸèƒ½ã€‚

é¦–å…ˆè¾“å…¥å‘½ä»¤

```
ranger --copy-config=all

```

æŠŠ ranger é…ç½®æ–‡ä»¶æ‹·è´åˆ°. config ä¸‹

è¿™ä¸ªæ—¶å€™ ranger å°±ä¼šç”Ÿæˆé…ç½®æ–‡ä»¶ç›®å½•~/.config/rangerï¼Œä¸‹é¢ä¸»è¦æœ‰è¿™æ ·å‡ ä¸ªæ–‡ä»¶ï¼š

```
rc.conf     - é€‰é¡¹è®¾ç½®å’Œå¿«æ·é”®
commands.py - èƒ½é€šè¿‡ : æ‰§è¡Œçš„å‘½ä»¤
rifle.conf  - æŒ‡å®šä¸åŒç±»å‹çš„æ–‡ä»¶çš„é»˜è®¤æ‰“å¼€ç¨‹åºã€‚
scope.sh    - ç”¨äºæŒ‡å®šé¢„è§ˆç¨‹åºçš„æ–‡ä»¶

```

æ ¹æ® [wiki](https://link.zhihu.com/?target=https%3A//github.com/ranger/ranger/wiki/Image-Previews) ä¸­é€‰æ‹© w3m è¿›è¡Œé¢„è§ˆå›¾ç‰‡ï¼Œä½†æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œäºæ˜¯å®‰è£…äº† ueberzugï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºå›¾åƒäº†ã€‚ï¼ˆè®°å¾—æ ¹æ® wiki ä¿®æ”¹ rc.confï¼Œåœ¨æœ«å°¾æ·»åŠ ä¸‹é¢ä¸¤è¡Œï¼‰

```
set preview_images true
set preview_images_method ueberzug

```

pdf é¢„è§ˆéœ€è¦å–æ¶ˆ scope.sh ä¸­ä¸‹é¢å‡ è¡Œ

![](1681639034265.png)

ç„¶åå®‰è£… pdftoppm

```
pacman -S poppler

```

### **é»˜è®¤æ‰“å¼€è½¯ä»¶**

å‚ç…§[çŸ¥ä¹åšå®¢ ranger çš„é…ç½®ä¸ä½¿ç”¨](https://zhuanlan.zhihu.com/p/105731111)ï¼Œä¸ºäº†ç”¨ wps é»˜è®¤æ‰“å¼€ docã€pdf å’Œ xlsxï¼Œæˆ‘åœ¨ rifle.conf ä¸­æ·»åŠ äº†ä¸‹é¢å››è¡Œï¼Œè¿™æ ·æŒ‰ä¸‹ enter é”®ä¾¿å¯ä»¥ç›´æ¥ç”¨ wps æ‰“å¼€æ–‡ä»¶ã€‚

```
ext md, has typora,     X, flag f = typora "$@"
ext pdf, has wpspdf,     X, flag f = wpspdf "$@"
ext docx?, has wps,       terminal = wps -- "$@" | "$PAGER"
ext pptx?|od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has wpp,     X, flag f = wpp "$@"


```

### **å¿«æ·é”®é…ç½®**

åœ¨ rc.conf æ–‡ä»¶åé¢æ·»åŠ 

```
map DD shell trash %s

```

å³å¯å®ç°ç”¨â€DDâ€ å°†å½“å‰æ‰€é€‰æ–‡ä»¶æ”¾åˆ° trash-bin ä¸­å».

## **åˆ‡æ¢æ˜¾ç¤ºä½ç½®**

ç”±äºæˆ‘æœ‰ä¸¤ä¸ªæ˜¾ç¤ºå±ï¼Œä½† dwm è¯†åˆ«çš„æ—¶å€™è¯†åˆ«åäº†ï¼Œå¯¼è‡´æˆ‘åœ¨ä¸åŒæ˜¾ç¤ºå±ä¸­ç§»åŠ¨é¼ æ ‡æ—¶æœ‰äº›åç›´è§‰ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥ç”¨ä¸‹é¢ xrandr å‘½ä»¤æŸ¥çœ‹å±å¹•è¾“å‡º

```
$ xrandr
Screen 0: minimum 320 x 200, current 3840 x 1080, maximum 16384 x 16384
eDP-1 connected primary 1920x1080+1920+0 (normal left inverted right x axis y axis) 344mm x 194mm
   1920x1080     60.00*+  59.97    59.96    59.93
   1680x1050     59.95    59.88
   1400x1050     59.98
   1600x900      59.99    59.94    59.95    59.82
   1280x1024     60.02
   1400x900      59.96    59.88
   1280x960      60.00
   1440x810      60.00    59.97
   1368x768      59.88    59.85
   1280x800      59.99    59.97    59.81    59.91
   1280x720      60.00    59.99    59.86    59.74
   1024x768      60.04    60.00
   960x720       60.00
   928x696       60.05
   896x672       60.01
   1024x576      59.95    59.96    59.90    59.82
   960x600       59.93    60.00
   960x540       59.96    59.99    59.63    59.82
   800x600       60.00    60.32    56.25
   840x525       60.01    59.88
   864x486       59.92    59.57
   700x525       59.98
   800x450       59.95    59.82
   640x512       60.02
   700x450       59.96    59.88
   640x480       60.00    59.94
   720x405       59.51    58.99
   684x384       59.88    59.85
   640x400       59.88    59.98
   640x360       59.86    59.83    59.84    59.32
   512x384       60.00
   512x288       60.00    59.92
   480x270       59.63    59.82
   400x300       60.32    56.34
   432x243       59.92    59.57
   320x240       60.05
   360x202       59.51    59.13
   320x180       59.84    59.32
HDMI-1 connected 1920x1080+0+0 (normal left inverted right x axis y axis) 527mm x 296mm
   1920x1080     60.00*+  50.00    59.94
   1920x1080i    60.00    50.00    59.94
   1680x1050     59.88
   1280x1024     75.02    60.02
   1440x900      59.90
   1280x960      60.00
   1280x720      60.00    50.00    59.94
   1024x768      75.03    70.07    60.00
   832x624       74.55
   800x600       72.19    75.00    60.32    56.25
   720x576       50.00
   720x480       60.00    59.94
   640x480       75.00    72.81    66.67    60.00    59.94
   720x400       70.08
DP-1 disconnected (normal left inverted right x axis y axis)
DP-2 disconnected (normal left inverted right x axis y axis)
â€‹

```

å¯ä»¥çœ‹åˆ°æˆ‘ä¸€ä¸ªæ˜¯ eDP-1ï¼Œå¦ä¸€ä¸ªæ˜¯ HDMI-1ï¼Œæˆ‘æƒ³è¦ HDMI-1 è¯†åˆ«åˆ° eDP-1 çš„å·¦è¾¹ï¼Œç”¨ä¸‹é¢å‘½ä»¤å³å¯

```
xrandr --output HDMI-1 --auto --left-of eDP-1

```